Copyright (c) 2007-2010 The Kaphan Foundation

This file contains instructions for running and configuring the Winnow content recommendation engine.

For information on building and installing the engine see the INSTALL file.

Obtaining an item cache
============================================

These instructions are most relevant to doing Winnow development in the context
of the complete winnowTag web application which is composed of the two Rails
apps winnowTag (the winnowtag.org UI) and the Collector (which harvests
feeds), Winnow, and other scripts.

TODO: Generalize these instructions so they are more applicable to developers
who are only using Winnow, and remove the obsolete references to copies of
item_cache.

With the classifier-tools package it is possible to build an item cache using a collector install as a source.
This is done using the classifier-import script, like so:

  classifier-import --url http://collector.wizztag.org/service --out item_cache_dir --since 10.days

This will download all items fetched in the last 10 days and build and item cache out of them.  The downside
is that this can take quite a while since it is involves lots of HTTP requests that add quite a bit of latency
to the process if it is running over the Internet.  A better and faster solution is to obtain a recent copy
of the item cache and use that.  There will be a relatively up-to-date copy available on S3 at the following URL:

  https://s3.amazonaws.com:443/classifier_db/item_cache.tar.gz

You can download and extract that file and you will have a pre-built and tokenized item cache that you can start using straight
away.

Warning: The above item cache is quite large, about 4GB when uncompressed.  If needed I will provide a smaller version.

Running the Classifier
============================================

The classifier can be run using the "classifier" executable. If you performed the "make install"
of the build instructions this is likely in your PATH.

Run "classifier -h" to see a list of supported arguments.

A typical usage will be to start the classifier on a specified port and item cache directory
and a positive cutoff threshold of 0.9. You probably also want a log file to be generated. This will be enough for most development cases.  

This can be done using the following command:

 classifier --db <item_cache_dir> --port 8008 -t 0.9 --log-file classifier.log

You can then tail -f classifier.log to see the log messages the classifier produces. Once a message appears in the log saying
the classifier has completed initialization you can then access it's http server on port 8008.  Initialization can sometimes
take a few minutes depending on the size of the item cache and whether the file system has cached item cache file access.

Once things are up and running Winnow will be able to talk to the classifier using the standard classifier UI elements.  You can
also do a simple test by entering http://localhost:8009/classifier.xml into a web browser to make sure everything is working.

Shutting it down
=============================================

The classifier is shutdown by sending it a SIGTERM signal. This can be done using CTRL-C or kill <pid>.
